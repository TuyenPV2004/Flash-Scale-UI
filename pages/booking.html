<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đặt vé - The Eras Tour</title>
    <link rel="stylesheet" href="../assets/css/global.css">
    <link rel="stylesheet" href="../assets/css/booking-flow.css">
    <link rel="stylesheet" href="../assets/css/seat-map.css"> 
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>
<body>
    <header class="focus-header">
        <div class="container" style="display: flex; align-items: center; justify-content: space-between;">
            <div style="display: flex; align-items: center; gap: 16px;">
                <a href="event-info.html" style="color: var(--text-secondary);"><i class="ph-bold ph-arrow-left" style="font-size: 20px;"></i></a>
                <span style="font-weight: 700; font-size: 18px;">The Eras Tour - Taylor Swift</span>
            </div>
            <div style="font-size: 14px; color: var(--text-secondary);">
                Hỗ trợ: 1900 1234
            </div>
        </div>
    </header>

    <main class="container">
        <div class="progress-steps">
            <div class="step-item active">
                <div class="step-number">1</div> Chọn loại vé
            </div>
            <div class="step-item">
                <div class="step-number">2</div> Chọn ghế
            </div>
            <div class="step-item">
                <div class="step-number">3</div> Thanh toán
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 40px; margin-bottom: 80px;">
            <div class="booking-main">
                <h2 style="margin-bottom: 24px;">Chọn loại vé</h2>
                
                <div class="ticket-row">
                    <div>
                        <h3 style="margin-bottom: 4px;">CAT 1 - Standing</h3>
                        <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 8px;">Khu vực đứng gần sân khấu nhất</p>
                        <div style="color: var(--primary); font-weight: 700;">5.000.000đ</div>
                    </div>
                    <div class="qty-control">
                        <button class="qty-btn" onclick="updateQty(this, -1)"><i class="ph-bold ph-minus"></i></button>
                        <input type="text" class="qty-value" value="0" readonly style="background:transparent; border:none; color:white;">
                        <button class="qty-btn" onclick="updateQty(this, 1)"><i class="ph-bold ph-plus"></i></button>
                    </div>
                </div>

                <div class="ticket-row">
                    <div>
                        <h3 style="margin-bottom: 4px;">CAT 2 - Seating</h3>
                        <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 8px;">Ghế ngồi khán đài tầng 1</p>
                        <div style="color: var(--primary); font-weight: 700;">3.500.000đ</div>
                    </div>
                    <div class="qty-control">
                        <button class="qty-btn" onclick="updateQty(this, -1)"><i class="ph-bold ph-minus"></i></button>
                        <input type="text" class="qty-value" value="0" readonly style="background:transparent; border:none; color:white;">
                        <button class="qty-btn" onclick="updateQty(this, 1)"><i class="ph-bold ph-plus"></i></button>
                    </div>
                </div>
                
                <div style="margin-top: 32px; text-align: right;">
                    <button class="btn btn-primary" onclick="alert('Chuyển sang bước chọn ghế!')">
                        Tiếp tục chọn ghế <i class="ph-bold ph-arrow-right"></i>
                    </button>
                </div>
            </div>

            <aside class="booking-sidebar-wrapper">
                <div class="countdown-box">
                    <i class="ph-fill ph-timer"></i>
                    <span id="timer">10:00</span>
                </div>

                <div class="card">
                    <h3 style="font-size: 18px; margin-bottom: 16px;">Tóm tắt đơn hàng</h3>
                    <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                        <img src="https://images.unsplash.com/photo-1540039155733-5bb30b53aa14?q=80&w=200" style="width: 60px; height: 60px; border-radius: 8px; object-fit: cover;">
                        <div>
                            <div style="font-weight: 700; font-size: 14px;">The Eras Tour</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">15/10/2026</div>
                        </div>
                    </div>
                    
                    <hr style="border-color: var(--border); margin-bottom: 16px;">
                    
                    <div class="summary-row">
                        <span style="color: var(--text-secondary);">Số lượng</span>
                        <span id="total-qty">0 vé</span>
                    </div>
                    <div class="summary-row">
                        <span style="color: var(--text-secondary);">Tạm tính</span>
                        <strong id="total-price" style="color: white;">0đ</strong>
                    </div>

                    <div style="margin-top: 16px; font-size: 12px; color: var(--text-muted); text-align: center;">
                        <i class="ph-fill ph-shield-check"></i> Hoàn tất thanh toán trong 10 phút để giữ chỗ.
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <script>
        // 1. Countdown Timer Logic
        function startTimer(duration, display) {
            var timer = duration, minutes, seconds;
            setInterval(function () {
                minutes = parseInt(timer / 60, 10);
                seconds = parseInt(timer % 60, 10);

                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;

                display.textContent = minutes + ":" + seconds;

                if (--timer < 0) {
                    timer = 0;
                    alert("Hết thời gian giữ vé! Vui lòng đặt lại.");
                }
            }, 1000);
        }

        window.onload = function () {
            var tenMinutes = 60 * 10,
                display = document.querySelector('#timer');
            startTimer(tenMinutes, display);
        };

        // 2. Quantity Logic (Demo)
        function updateQty(btn, change) {
            const input = btn.parentElement.querySelector('input');
            let val = parseInt(input.value);
            val += change;
            if(val < 0) val = 0;
            input.value = val;
            
            // Cập nhật sơ bộ tổng tiền (Demo logic)
            // Trong thực tế bạn cần tính toán dựa trên data-price
            updateSummary();
        }

        function updateSummary() {
            // Demo update text
            document.getElementById('total-qty').innerText = "Đang tính...";
        }
    </script>
</body>
</html>